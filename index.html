<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="header.css">
</head>

<body>
    <div class="container">
        <header class="header" id="header">
            <div class="logo">
                <a href="index.html"><img src="logo.png" alt="LOGO"></a>
            </div>
            <ul>
                <li class="menu"><a href="#planner" class="navLinks">플래너</a></li>
                <li class="menu"><a href="#recommand" class="navLinks">추천 여행지</a></li>
                <li class="menu"><a href="#test" class="navLinks">테스트</a></li>
                <li class="menu"><a href="#community" class="navLinks">커뮤니티</a></li>
            </ul>
            <div class="link">
                <a href="#download"><img src="download.png" alt="DOWNLOAD"></a>
            </div>
        </header>
        <article class=start>
            <div style="position: absolute;">
                <div style="position: relative; width: 980px; height:287.7px; top: 656px; left: 0px;"><img src="img834.png"></img>
                </div>
            </div>
            <div style="position: absolute;">
                <div style="position: relative; width: 374px; height: 467px; top: 278px; left: 600px;"><img src="img1.png"></img>
                </div>
            </div>
            <div class="textstart" style="position: absolute;">
                <p1>여행 시뮬레이션으로 <br> 알아보는 <br> 나의 여행성향</p1>
            </div>
            <div class="starttext" style="position: absolute;">
                <button type="button" class="startbutton" onclick="start();">출발></p1>
            </div>

            <img src="img451.png" style="width: 980px; height: 944px;"></img>
        </article>
        <article class="question">
            <div class="qtitle" style="position: absolute;">
            <div style="position: relative;width: 374px; height: 467px; top: 216px; left: 334px;"><h2 id="title">문제</h2>
            </div> 
            </div>
            <input id="type" type="hidden" value="EI">
            <div style="position: absolute;">
                <div style="position: relative;width: 374px; height: 467px; top: 419px; left: 365px;">
            <button id="A" type="button" class="btn btn-light mt-5">Light</button>
                <button id="B" type="button" class="btn btn-light mt-5">Light</button>
            </div>
    </div>
    <img src="img839.png" style="width: 980px; height: 944px;"></img>
    </article>
    <article class="result">
        <img id="img" class="rounded-circle mt-5" src="astronaut.png" alt="personality">
        <h2 id="city" class="text-center mt-5">여행성향</h2>
        <h3 id="explain" class="text-center mt-5">설명</h3>
        <div class="share addthis_inline_share_toolbox"></div>

    </article>
    <input type="hidden" id="EI" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">


    </div>
</body>

</html>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script>
    var num = 1;
    var q = {
        1: {
            "title": "우연히 tv 속에서 한 여행지를 보았다. 그리고 그곳으로 여행을 떠날 생각에 설렘이 가득하다. 당신이 보고 있는 여행지는?",
            "type": "EI",
            "A": "예쁜 풍경과 힐링 요소가 많은 여행지",
            "B": "액티비티와 즐길 거리가 많은 여행지"
        },
        2: {
            "title": "그곳에 누구와 같이 가지?",
            "type": "EI",
            "A": "인생은 혼자 사는 것~ 당연히 홀로 여행!",
            "B": "홀로 다니는 것은 외로워, 여행은 모름지기 친구들과!"
        },
        3: {
            "title": "얼마나 있다 오지?",
            "type": "EI",
            "A": "떠났으니 당연히 몇일 밤은 자고 와야지",
            "B": "잠은 무슨! 여행은 당일치기지"
        },
        4: {
            "title": "친구에게 같이 여행을 가자고 연락이 왔다. 당신이 같이 갈 친구는?",
            "type": "SN",
            "A": "계획표는 늘 내 손안에! j형 인간 민영",
            "B": "내가 가는 길이 곧 길이다~ 가서 생각하자! 즉흥적인 p형 인간 지우"
        },
        5: {
            "title": "여행 메이트와 단체 톡방이 만들어졌다. 당신이 할 일은? ",
            "type": "SN",
            "A": "나만 믿고 따라와~ 나의 주도하에 여행계획을 짠다",
            "B": "아우 귀찮아~ 난 군말없이 따라가기만 할께!"
        },
        6: {
            "title": "숙소 인근에 두가지의 유명한 스팟이 있다! 당신의 선택은?",
            "type": "SN",
            "A": "사진1 (들판)",
            "B": "사진2 (바다)"
        },
        7: {
            "title": "무엇을 들고 가야하지?",
            "type": "TF",
            "A": "구두, 운동화, 스피커…. 역시 여행은 캐리어지!",
            "B": "어차피 다 짐이야~ 입을 옷 몇 벌 이랑 세면도구만 챙겨!"
        },
        8: {
            "title": "드디어 여행 날! ",
            "type": "TF",
            "A": "이미 일주일전부터 캐리어를 준비했지! ",
            "B": "당일 날 부랴부랴 필요한 것만! "
        },
        9: {
            "title": "가려고 했던 맛집에 사정이 생겨 문을 닫았다",
            "type": "TF",
            "A": "주변에 맛있어 보이는 집에 들어가자!",
            "B": "리뷰를 비교 분석해서 새로운 맛집을 찾아보자!"
        },
        10: {
            "title": "하루의 여행이 끝이났다.당신이 들어가고 있는 숙소는?",
            "type": "JP",
            "A": "게스트하우스",
            "B": "호텔"
        },
        11: {
            "title": "잠이들기 전 당신이 하는 일은?",
            "type": "JP",
            "A": "머릿속으로 하루를 정리한다 ",
            "B": "인스타그램에 하루 여행기록은 남긴다"
        },
        12: {
            "title": "아침이 되었다. 너무 피곤하지만 계획한 여행지를 가려면 당장 일어나야 한다. ",
            "type": "JP",
            "A": "하나쯤 안가면 어때~ 계획 수정 개추",
            "B": "당장 일어나서 씻고 출발!"
        }
    }
    var result = {
        "ISTJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ISFJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "INFJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "INTJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ISTP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ISFP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "INFP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "INTP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ESTP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ESFP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ENFP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ENTP": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ESTJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ESFJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ENFJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        },
        "ENTJ": {
            "city": "우주인형",
            "explain": "설명",
            "img": "astronaut.png"
        }
    }

    function start() {
        $(".start").hide();
        $(".question").show();
        next();
    }
    $("#A").click(function() {
        var type = $("#type").val()
        var prevalue = $("#" + type).val();
        $("#" + type).val(parseInt(prevalue) + 1);
        next();
    });
    $("#B").click(function() {
        next();
    });

    function next() {
        if (num == 13) {
            $(".question").hide();
            $(".result").show();

            var mbti = ""
            if ($("#EI").val() < 2) {
                mbti = mbti + "I";
            } else {
                mbti = mbti + "E";
            }
            if ($("#SN").val() < 2) {
                mbti = mbti + "N";
            } else {
                mbti = mbti + "S";
            }
            if ($("#TF").val() < 2) {
                mbti = mbti + "F";
            } else {
                mbti = mbti + "T";
            }
            if ($("#JP").val() < 2) {
                mbti = mbti + "P";
            } else {
                mbti = mbti + "J";
            }
            $("#img").attr("src", result[mbti]["img"]);
            $("#city").html(result[mbti]["city"]);
            $("#explain").html(result[mbti]["explain"]);

            const urlParams = new URLSearchParams(window.location.href);
            id = urlParams.get('user_id');
            const newurlParams = new URLSearchParams("2ntrip.com/api/v1/users/travelFavorite/");
            newurlParams.append('user_id', id);
            newurlParams.append('travelFavorite', '196');
            fetch(newurlParams), {
                method: 'PUT',
                headers: {
                    'content-type': 'application/json'
                }

            }


        } else {
            $(".progress-bar").attr('style', 'width: calc(100/12*' + num + '%)');
            $("#title").html(q[num]["title"]);
            $("#type").val(q[num]["type"]);
            $("#A").html(q[num]["A"]);
            $("#B").html(q[num]["B"]);
            num++;
        }

    }
</script>